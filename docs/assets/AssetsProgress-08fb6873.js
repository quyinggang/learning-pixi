import{A as u}from"./index-b27a38ca.js";import{A as b,e as g}from"./AbstractText-0427048e.js";import{H as f,m as x}from"./measureHtmlText-346f442e.js";import{A as _}from"./Assets-e73592ed.js";import{r as v,o as w,b as y,c as A}from"./index-fdef2ad1.js";import"./TextStyle-0ba7dbf0.js";class T extends b{constructor(...e){const c=g(e,"HtmlText");super(c,f),this.renderPipeId="htmlText"}_updateBounds(){const e=this._bounds,c=this._style.padding,i=this._anchor,a=x(this.text,this._style),{width:t,height:s}=a;e.minX=-i._x*t-c,e.maxX=e.minX+t,e.minY=-i._y*s-c,e.maxY=e.minY+s}}const E={__name:"AssetsProgress",setup(r){const e=v(null),c=async(t,s)=>{const n=new u;return await n.init({width:t,height:s,antialias:!0,resolution:window.devicePixelRatio||1,autoDensity:!0}),n},i=async t=>{const s=t.stage,n=t.screen,o=new T({text:"开始加载资源...",style:{fontFamily:"Arial",fontSize:20,fill:16715792,align:"center"}});o.position.set(n.width*.5,n.height*.5),s.addChild(o);const m=["https://pic3.zhimg.com/v2-5523ed93593ee4c7fd97b972d0af92d3_r.jpg","https://pic3.zhimg.com/v2-6a1dc51b6b3efc26b221568894165605_r.jpg","https://pic1.zhimg.com/v2-ed385e72baf0a9c1d06c633982672402_r.jpg","https://pic3.zhimg.com/v2-230b33bf409772ea9a62be47d25cf816_r.jpg","https://pic1.zhimg.com/v2-9db7bf3b825f2db103a534ca59c75481_r.jpg","https://pic4.zhimg.com/v2-5bde4b779cbcb801ab41d79509231ec4_r.jpg"],p=d=>{const h=Math.trunc(d*100);o.text=`${h}%`},l=await _.load(m,p);return o.text="资源加载完毕",l},a=async t=>{const{element:s,boundingRect:n}=t,o=await c(n.width,n.height);s.appendChild(o.canvas),await i(o)};return w(()=>{const t=e.value,s=t.getBoundingClientRect();a({element:t,boundingRect:s})}),(t,s)=>(y(),A("div",{ref_key:"boxElementRef",ref:e,class:"box"},null,512))}};export{E as default};
