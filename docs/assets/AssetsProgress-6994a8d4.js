import{A as u}from"./index-71e254cb.js";import{r as b,o as g,a as f,c as x}from"./index-cb412c0d.js";import{A as _,e as v,a as w}from"./AbstractText-00122b7b.js";import{H as y,m as A}from"./measureHtmlText-d4920fb1.js";import"./TextStyle-8283246b.js";class T extends _{constructor(...e){const c=v(e,"HtmlText");super(c,y),this.renderPipeId="htmlText"}_updateBounds(){const e=this._bounds,c=this._style.padding,a=this._anchor,i=A(this.text,this._style),{width:t,height:s}=i;e.minX=-a._x*t-c,e.maxX=e.minX+t,e.minY=-a._y*s-c,e.maxY=e.minY+s}}const B={__name:"AssetsProgress",setup(r){const e=b(null),c=async(t,s)=>{const n=new u;return await n.init({width:t,height:s,antialias:!0,resolution:window.devicePixelRatio||1,autoDensity:!0}),n},a=async t=>{const s=t.stage,n=t.screen,o=new T({text:"开始加载资源...",style:{fontFamily:"Arial",fontSize:20,fill:16715792,align:"center"}});o.position.set(n.width*.5,n.height*.5),s.addChild(o);const m=["https://pic3.zhimg.com/v2-5523ed93593ee4c7fd97b972d0af92d3_r.jpg","https://pic3.zhimg.com/v2-6a1dc51b6b3efc26b221568894165605_r.jpg","https://pic1.zhimg.com/v2-ed385e72baf0a9c1d06c633982672402_r.jpg","https://pic3.zhimg.com/v2-230b33bf409772ea9a62be47d25cf816_r.jpg","https://pic1.zhimg.com/v2-9db7bf3b825f2db103a534ca59c75481_r.jpg","https://pic4.zhimg.com/v2-5bde4b779cbcb801ab41d79509231ec4_r.jpg"],p=d=>{const h=Math.trunc(d*100);o.text=`${h}%`},l=await w.load(m,p);return o.text="资源加载完毕",l},i=async t=>{const{element:s,boundingRect:n}=t,o=await c(n.width,n.height);s.appendChild(o.canvas),await a(o)};return g(()=>{const t=e.value,s=t.getBoundingClientRect();i({element:t,boundingRect:s})}),(t,s)=>(f(),x("div",{ref_key:"boxElementRef",ref:e,class:"box"},null,512))}};export{B as default};
