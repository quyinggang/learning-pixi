import{E as h,T as D,w as p,c as _,p as x,i as $,L as B,D as m,C as A,R as E,I as G,a as Z,V as P,d as J,e as b,b as q,B as ee,O as te,f as se,v as ae}from"./index-71e254cb.js";class ie{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let a=0;a<t;a++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const re={extension:h.CacheParser,test:s=>Array.isArray(s)&&s.every(e=>e instanceof D),getCacheableAssets:(s,e)=>{const t={};return s.forEach(a=>{e.forEach((i,r)=>{t[a+(r===0?"":r+1)]=i})}),t}};async function z(s){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=s});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(s)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const oe={extension:{type:h.DetectionParser,priority:1},test:async()=>z("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async s=>[...s,"avif"],remove:async s=>s.filter(e=>e!=="avif")},F=["png","jpg","jpeg"],ne={extension:{type:h.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async s=>[...s,...F],remove:async s=>s.filter(e=>!F.includes(e))},ce="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function I(s){return ce?!1:document.createElement("video").canPlayType(s)!==""}const de={extension:{type:h.DetectionParser,priority:0},test:async()=>I("video/mp4"),add:async s=>[...s,"mp4","m4v"],remove:async s=>s.filter(e=>e!=="mp4"&&e!=="m4v")},le={extension:{type:h.DetectionParser,priority:0},test:async()=>I("video/ogg"),add:async s=>[...s,"ogv"],remove:async s=>s.filter(e=>e!=="ogv")},he={extension:{type:h.DetectionParser,priority:0},test:async()=>I("video/webm"),add:async s=>[...s,"webm"],remove:async s=>s.filter(e=>e!=="webm")},ue={extension:{type:h.DetectionParser,priority:0},test:async()=>z("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async s=>[...s,"webp"],remove:async s=>s.filter(e=>e!=="webp")};class fe{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,a)=>(this._parsersValidated=!1,e[t]=a,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const a={promise:null,parser:null};return a.promise=(async()=>{var n,o;let i=null,r=null;if(t.loadParser&&(r=this._parserHash[t.loadParser],r||p(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!r){for(let d=0;d<this.parsers.length;d++){const c=this.parsers[d];if(c.load&&((n=c.test)!=null&&n.call(c,e,t,this))){r=c;break}}if(!r)return p(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await r.load(e,t,this),a.parser=r;for(let d=0;d<this.parsers.length;d++){const c=this.parsers[d];c.parse&&c.parse&&await((o=c.testParse)==null?void 0:o.call(c,i,t,this))&&(i=await c.parse(i,t,this)||i,a.parser=c)}return i})(),a}async load(e,t){this._parsersValidated||this._validateParsers();let a=0;const i={},r=$(e),n=_(e,c=>({alias:[c],src:c})),o=n.length,d=n.map(async c=>{const l=x.toAbsolute(c.src);if(!i[c.src])try{this.promiseCache[l]||(this.promiseCache[l]=this._getLoadPromiseAndParser(l,c)),i[c.src]=await this.promiseCache[l].promise,t&&t(++a/o)}catch(u){throw delete this.promiseCache[l],delete i[c.src],new Error(`[Loader.load] Failed to load ${l}.
${u}`)}});return await Promise.all(d),r?i[n[0].src]:i}async unload(e){const a=_(e,i=>({alias:[i],src:i})).map(async i=>{var o,d;const r=x.toAbsolute(i.src),n=this.promiseCache[r];if(n){const c=await n.promise;delete this.promiseCache[r],await((d=(o=n.parser)==null?void 0:o.unload)==null?void 0:d.call(o,c,i,this))}});await Promise.all(a)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(t.name?e[t.name]&&p(`[Assets] loadParser name conflict "${t.name}"`):p("[Assets] loadParser should have a name"),{...e,[t.name]:t}),{})}}function w(s,e){if(Array.isArray(e)){for(const t of e)if(s.startsWith(`data:${t}`))return!0;return!1}return s.startsWith(`data:${e}`)}function v(s,e){const t=s.split("?")[0],a=x.extname(t).toLowerCase();return Array.isArray(e)?e.includes(a):a===e}const Ae=".json",pe="application/json",me={extension:{type:h.LoadParser,priority:B.Low},name:"loadJson",test(s){return w(s,pe)||v(s,Ae)},async load(s){return await(await m.get().fetch(s)).json()}},ge=".txt",ye="text/plain",we={name:"loadTxt",extension:{type:h.LoadParser,priority:B.Low},test(s){return w(s,ye)||v(s,ge)},async load(s){return await(await m.get().fetch(s)).text()}},ve=["normal","bold","100","200","300","400","500","600","700","800","900"],_e=[".ttf",".otf",".woff",".woff2"],be=["font/ttf","font/otf","font/woff","font/woff2"],xe=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function Be(s){const e=x.extname(s),i=x.basename(s,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1));let r=i.length>0;for(const o of i)if(!o.match(xe)){r=!1;break}let n=i.join(" ");return r||(n=`"${n.replace(/[\\"]/g,"\\$&")}"`),n}const Le=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function Ee(s){return Le.test(s)?s:encodeURI(s)}const Pe={extension:{type:h.LoadParser,priority:B.Low},name:"loadWebFont",test(s){return w(s,be)||v(s,_e)},async load(s,e){var a,i,r;const t=m.get().getFontFaceSet();if(t){const n=[],o=((a=e.data)==null?void 0:a.family)??Be(s),d=((r=(i=e.data)==null?void 0:i.weights)==null?void 0:r.filter(l=>ve.includes(l)))??["normal"],c=e.data??{};for(let l=0;l<d.length;l++){const u=d[l],f=new FontFace(o,`url(${Ee(s)})`,{...c,weight:u});await f.load(),t.add(f),n.push(f)}return A.set(`${o}-and-url`,{url:s,fontFaces:n}),n.length===1?n[0]:n}return p("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(s){(Array.isArray(s)?s:[s]).forEach(e=>{A.remove(e.family),m.get().getFontFaceSet().delete(e)})}};function O(s,e=1){var a;const t=(a=E.RETINA_PREFIX)==null?void 0:a.exec(s);return t?parseFloat(t[1]):e}function C(s,e,t){s.label=t,s._sourceOrigin=t;const a=new D({source:s,label:t}),i=()=>{delete e.promiseCache[t],A.has(t)&&A.remove(t)};return a.source.once("destroy",()=>{e.promiseCache[t]&&(p("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),i())}),a.once("destroy",()=>{s.destroyed||(p("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),a}const ke=".svg",Re="image/svg+xml",Ie={extension:{type:h.LoadParser,priority:B.Low},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(s){return w(s,Re)||v(s,ke)},async load(s,e,t){return e.data.parseAsGraphicsContext??this.config.parseAsGraphicsContext?Ce(s):Oe(s,e,t,this.config.crossOrigin)},unload(s){s.destroy(!0)}};async function Oe(s,e,t,a){var W,T,j;const r=await(await m.get().fetch(s)).blob(),n=URL.createObjectURL(r),o=new Image;o.src=n,o.crossOrigin=a,await o.decode(),URL.revokeObjectURL(n);const d=document.createElement("canvas"),c=d.getContext("2d"),l=((W=e.data)==null?void 0:W.resolution)||O(s),u=((T=e.data)==null?void 0:T.width)??o.width,f=((j=e.data)==null?void 0:j.height)??o.height;d.width=u*l,d.height=f*l,c.drawImage(o,0,0,u*l,f*l);const{parseAsGraphicsContext:U,...Y}=e.data,Q=new G({resource:d,alphaMode:"premultiply-alpha-on-upload",resolution:l,...Y});return C(Q,t,s)}async function Ce(s){const t=await(await m.get().fetch(s)).text(),a=new Z;return a.svg(t),a}const Ue=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let g=null,R=class{constructor(){g||(g=URL.createObjectURL(new Blob([Ue],{type:"application/javascript"}))),this.worker=new Worker(g)}};R.revokeObjectURL=function(){g&&(URL.revokeObjectURL(g),g=null)};const We=`(function () {
    'use strict';

    async function loadImageBitmap(url) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      const imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap;
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let y=null;class K{constructor(){y||(y=URL.createObjectURL(new Blob([We],{type:"application/javascript"}))),this.worker=new Worker(y)}}K.revokeObjectURL=function(){y&&(URL.revokeObjectURL(y),y=null)};let M=0,k;class Te{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new R;t.addEventListener("message",a=>{t.terminate(),R.revokeObjectURL(),e(a.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){k===void 0&&(k=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<k&&(this._createdWorkers++,e=new K().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),this._resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const a=new Promise((i,r)=>{this._queue.push({id:e,arguments:t,resolve:i,reject:r})});return this._next(),a}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),a=t.id;this._resolveHash[M]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:M++,id:a})}}const S=new Te,je=[".jpeg",".jpg",".png",".webp",".avif"],Fe=["image/jpeg","image/png","image/webp","image/avif"];async function Me(s){const e=await m.get().fetch(s);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${s}: ${e.status} ${e.statusText}`);const t=await e.blob();return await createImageBitmap(t)}const N={name:"loadTextures",extension:{type:h.LoadParser,priority:B.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(s){return w(s,Fe)||v(s,je)},async load(s,e,t){var r;let a=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await S.isImageBitmapSupported()?a=await S.loadImageBitmap(s):a=await Me(s):a=await new Promise(n=>{a=new Image,a.crossOrigin=this.config.crossOrigin,a.src=s,a.complete?n(a):a.onload=()=>{n(a)}});const i=new G({resource:a,alphaMode:"premultiply-alpha-on-upload",resolution:((r=e.data)==null?void 0:r.resolution)||O(s),...e.data});return C(i,t,s)},unload(s){s.destroy(!0)}},H=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],Se=H.map(s=>`video/${s.substring(1)}`);function Ve(s,e,t){t===void 0&&!e.startsWith("data:")?s.crossOrigin=$e(e):t!==!1&&(s.crossOrigin=typeof t=="string"?t:"anonymous")}function De(s){return new Promise((e,t)=>{s.addEventListener("canplaythrough",a),s.addEventListener("error",i),s.load();function a(){r(),e()}function i(n){r(),t(n)}function r(){s.removeEventListener("canplaythrough",a),s.removeEventListener("error",i)}})}function $e(s,e=globalThis.location){if(s.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(s,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}const Ge={name:"loadVideo",extension:{type:h.LoadParser},config:null,test(s){const e=w(s,Se),t=v(s,H);return e||t},async load(s,e,t){var d,c;const a={...P.defaultOptions,resolution:((d=e.data)==null?void 0:d.resolution)||O(s),alphaMode:((c=e.data)==null?void 0:c.alphaMode)||await J(),...e.data},i=document.createElement("video"),r={preload:a.autoLoad!==!1?"auto":void 0,"webkit-playsinline":a.playsinline!==!1?"":void 0,playsinline:a.playsinline!==!1?"":void 0,muted:a.muted===!0?"":void 0,loop:a.loop===!0?"":void 0,autoplay:a.autoPlay!==!1?"":void 0};Object.keys(r).forEach(l=>{const u=r[l];u!==void 0&&i.setAttribute(l,u)}),a.muted===!0&&(i.muted=!0),Ve(i,s,a.crossorigin);const n=document.createElement("source");let o;if(s.startsWith("data:"))o=s.slice(5,s.indexOf(";"));else if(!s.startsWith("blob:")){const l=s.split("?")[0].slice(s.lastIndexOf(".")+1).toLowerCase();o=P.MIME_TYPES[l]||`video/${l}`}return n.src=s,o&&(n.type=o),new Promise(l=>{const u=async()=>{const f=new P({...a,resource:i});i.removeEventListener("canplay",u),e.data.preload&&await De(i),l(C(f,t,s))};i.addEventListener("canplay",u),i.appendChild(n)})},unload(s){s.destroy(!0)}},X={extension:h.ResolveParser,test:N.test,parse:s=>{var e;return{resolution:parseFloat(((e=E.RETINA_PREFIX.exec(s))==null?void 0:e[1])??"1"),format:s.split(".").pop(),src:s}}},ze={extension:h.ResolveParser,test:s=>E.RETINA_PREFIX.test(s)&&s.endsWith(".json"),parse:X.parse};class Ke{constructor(){this._detections=[],this._initialized=!1,this.resolver=new E,this.loader=new fe,this.cache=A,this._backgroundLoader=new ie(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var r,n;if(this._initialized){p("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let o=e.manifest;typeof o=="string"&&(o=await this.load(o)),this.resolver.addManifest(o)}const t=((r=e.texturePreference)==null?void 0:r.resolution)??1,a=typeof t=="number"?[t]:t,i=await this._detectFormats({preferredFormats:(n=e.texturePreference)==null?void 0:n.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:a}}),e.preferences&&this.setPreferences(e.preferences)}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const a=$(e),i=_(e).map(o=>{if(typeof o!="string"){const d=this.resolver.getAlias(o);return d.some(c=>!this.resolver.hasKey(c))&&this.add(o),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(o)||this.add({alias:o,src:o}),o}),r=this.resolver.resolve(i),n=await this._mapLoadToResolve(r,t);return a?n[i[0]]:n}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let a=!1;typeof e=="string"&&(a=!0,e=[e]);const i=this.resolver.resolveBundle(e),r={},n=Object.keys(i);let o=0,d=0;const c=()=>{t==null||t(++o/d)},l=n.map(u=>{const f=i[u];return d+=Object.keys(f).length,this._mapLoadToResolve(f,c).then(U=>{r[u]=U})});return await Promise.all(l),a?r[e[0]]:r}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(a=>{this._backgroundLoader.add(Object.values(a))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return A.get(e);const t={};for(let a=0;a<e.length;a++)t[a]=A.get(e[a]);return t}async _mapLoadToResolve(e,t){const a=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const i=await this.loader.load(a,t);this._backgroundLoader.active=!0;const r={};return a.forEach(n=>{const o=i[n.src],d=[n.src];n.alias&&d.push(...n.alias),d.forEach(c=>{r[c]=o}),A.set(d,o)}),r}async unload(e){this._initialized||await this.init();const t=_(e).map(i=>typeof i!="string"?i.src:i),a=this.resolver.resolve(t);await this._unloadFromResolved(a)}async unloadBundle(e){this._initialized||await this.init(),e=_(e);const t=this.resolver.resolveBundle(e),a=Object.keys(t).map(i=>this._unloadFromResolved(t[i]));await Promise.all(a)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(a=>{A.remove(a.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const a of e.detections)e.skipDetections||await a.test()?t=await a.add(t):e.skipDetections||(t=await a.remove(t));return t=t.filter((a,i)=>t.indexOf(a)===i),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(a=>a in e).forEach(a=>{t.config[a]=e[a]})})}}const L=new Ke;b.handleByList(h.LoadParser,L.loader.parsers).handleByList(h.ResolveParser,L.resolver.parsers).handleByList(h.CacheParser,L.cache.parsers).handleByList(h.DetectionParser,L.detections);b.add(re,ne,oe,ue,de,le,he,me,we,Pe,Ie,N,Ge,X,ze);const V={loader:h.LoadParser,resolver:h.ResolveParser,cache:h.CacheParser,detection:h.DetectionParser};b.handle(h.Asset,s=>{const e=s.ref;Object.entries(V).filter(([t])=>!!e[t]).forEach(([t,a])=>b.add(Object.assign(e[t],{extension:e[t].extension??a})))},s=>{const e=s.ref;Object.keys(V).filter(t=>!!e[t]).forEach(t=>b.remove(e[t]))});class Xe extends q{constructor(e,t){const{text:a,resolution:i,style:r,anchor:n,width:o,height:d,roundPixels:c,...l}=e;super({...l}),this.batched=!0,this.resolution=null,this._didTextUpdate=!0,this._roundPixels=0,this._bounds=new ee,this._boundsDirty=!0,this._styleClass=t,this.text=a??"",this.style=r,this.resolution=i??null,this.allowChildren=!1,this._anchor=new te({_onUpdate:()=>{this.onViewUpdate()}}),n&&(this.anchor=n),this.roundPixels=c??!1,o&&(this.width=o),d&&(this.height=d)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}get style(){return this._style}set style(e){var t;e=e||{},(t=this._style)==null||t.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){let a,i;typeof e!="object"?(a=e,i=t??e):(a=e.width,i=e.height??e.width),a!==void 0&&this._setWidth(a,this.bounds.width),i!==void 0&&this._setHeight(i,this.bounds.height)}addBounds(e){const t=this.bounds;e.addFrame(t.minX,t.minY,t.maxX,t.maxY)}containsPoint(e){const t=this.bounds.maxX,a=this.bounds.maxY,i=-t*this.anchor.x;let r=0;return e.x>=i&&e.x<=i+t&&(r=-a*this.anchor.y,e.y>=r&&e.y<=r+a)}onViewUpdate(){this._didChangeId+=1<<12,this._boundsDirty=!0,!this.didViewUpdate&&(this.didViewUpdate=!0,this._didTextUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}_getKey(){return`${this.text}:${this._style.styleKey}`}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}}function Ye(s,e){let t=s[0]??{};return(typeof t=="string"||s[1])&&(se(ae,`use new ${e}({ text: "hi!", style }) instead`),t={text:t,style:s[1]}),t}export{Xe as A,L as a,Ye as e};
