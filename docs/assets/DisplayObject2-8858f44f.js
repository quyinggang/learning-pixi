import{S as L,T as f,a as T,U as B,M as H,O as _,C as v,d as Y,v as V,i as X,j as x,A as O,P as G}from"./index-19f7f59e.js";import{A as U}from"./Assets-16998ece.js";import{A as I,e as $}from"./AbstractText-bec8b59a.js";import{T as E}from"./TextStyle-78f8ae7d.js";import{B as j}from"./BitmapFontManager-8012d17b.js";import{M as F}from"./Mesh-8e5fa2de.js";import{M as R}from"./MeshGeometry-8e968a44.js";import{P as z}from"./PlaneGeometry-ddf45470.js";import{r as q,o as W,a as J,c as K}from"./index-2ed5649e.js";import"./CanvasPool-f94e9513.js";import"./State-93d76a17.js";class b extends L{constructor(t,e=!0){super(t[0]instanceof f?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=e,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(T.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(T.shared.add(this.update,this,B.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const e=t.deltaTime,i=this.animationSpeed*e,r=this.currentFrame;if(this._durations!==null){let s=this._currentTime%1*this._durations[this.currentFrame];for(s+=i/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];const a=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this._updateTexture())}_updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this.texture=this._textures[t],this.updateAnchor&&this.anchor.copyFrom(this.texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(){this.stop(),super.destroy(),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const e=[];for(let i=0;i<t.length;++i)e.push(f.from(t[i]));return new b(e)}static fromImages(t){const e=[];for(let i=0;i<t.length;++i)e.push(f.from(t[i]));return new b(e)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof f)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this._updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this._updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(T.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(T.shared.add(this.update,this),this._isConnectedToTicker=!0))}}class N{constructor({matrix:t,observer:e}={}){this.dirty=!0,this._matrix=t??new H,this.observer=e,this.position=new _(this,0,0),this.scale=new _(this,1,1),this.pivot=new _(this,0,0),this.skew=new _(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){const t=this._matrix;return this.dirty&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this.dirty=!1),t}_onUpdate(t){var e;this.dirty=!0,t===this.skew&&this.updateSkew(),(e=this.observer)==null||e._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(t){t.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this.skew))}}const M=class P extends v{constructor(...t){let e=t[0]||{};e instanceof f&&(e={texture:e}),t.length>1&&(Y(V,"use new TilingSprite({ texture, width:100, height:100 }) instead"),e.width=t[1],e.height=t[2]),e={...P.defaultOptions,...e};const{texture:i,anchor:r,tilePosition:s,tileScale:a,tileRotation:d,width:l,height:p,applyAnchorToTexture:n,roundPixels:h,...o}=e??{};super({label:"TilingSprite",...o}),this.renderPipeId="tilingSprite",this.canBundle=!0,this.batched=!0,this._roundPixels=0,this._bounds={minX:0,maxX:1,minY:0,maxY:0},this._boundsDirty=!0,this.allowChildren=!1,this._anchor=new _(this),this._applyAnchorToTexture=n,this.texture=i,this._width=l??i.width,this._height=p??i.height,this._tileTransform=new N({observer:{_onUpdate:()=>this.onViewUpdate()}}),r&&(this.anchor=r),this.tilePosition=s,this.tileScale=a,this.tileRotation=d,this.roundPixels=h??!1}static from(t,e={}){return typeof t=="string"?new P({texture:X.get(t),...e}):new P({texture:t,...e})}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(t){this._texture.textureMatrix.clampMargin=t}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get tilePosition(){return this._tileTransform.position}set tilePosition(t){this._tileTransform.position.copyFrom(t)}get tileScale(){return this._tileTransform.scale}set tileScale(t){typeof t=="number"?this._tileTransform.scale.set(t):this._tileTransform.scale.copyFrom(t)}set tileRotation(t){this._tileTransform.rotation=t}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}set texture(t){t||(t=f.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this.onViewUpdate())}get texture(){return this._texture}set width(t){this._width=t,this.onViewUpdate()}get width(){return this._width}set height(t){this._height=t,this.onViewUpdate()}get height(){return this._height}_updateBounds(){const t=this._bounds,e=this._anchor,i=this._width,r=this._height;t.maxX=-e._x*i,t.minX=t.maxX+i,t.maxY=-e._y*r,t.minY=t.maxY+r}addBounds(t){const e=this.bounds;t.addFrame(e.minX,e.minY,e.maxX,e.maxY)}containsPoint(t){const e=this.bounds.minX,i=this.bounds.minY,r=-e*this._anchor._x;let s=0;return t.x>=r&&t.x<=r+e&&(s=-i*this._anchor._y,t.y>=s&&t.y<=s+i)}onViewUpdate(){this._boundsDirty=!0,this._didTilingSpriteUpdate=!0,this._didChangeId+=1<<12,!this.didViewUpdate&&(this.didViewUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}destroy(t=!1){if(super.destroy(t),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const i=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(i)}this._texture=null}};M.defaultOptions={texture:f.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};let Q=M;class Z extends I{constructor(...t){var e;const i=$(t,"BitmapText");i.style??(i.style=i.style||{}),(e=i.style).fill??(e.fill=16777215),super(i,E),this.renderPipeId="bitmapText"}_updateBounds(){const t=this._bounds,e=this._style.padding,i=this._anchor,r=j.measureText(this.text,this._style),s=r.scale,a=r.offsetY*s,d=r.width*s,l=r.height*s;t.minX=-i._x*d-e,t.maxX=t.minX+d,t.minY=-i._y*(l+a)-e,t.maxY=t.minY+l}}class tt extends F{constructor(t){const{texture:e,verticesX:i,verticesY:r,...s}=t,a=new z(x({width:e.width,height:e.height,verticesX:i,verticesY:r}));super(x({...s,geometry:a,texture:e})),this.texture=e,this.autoResize=!0}textureUpdated(){const t=this.geometry,{width:e,height:i}=this.texture;this.autoResize&&(t.width!==e||t.height!==i)&&(t.width=e,t.height=i,t.build({}))}set texture(t){var e;(e=this._texture)==null||e.off("update",this.textureUpdated,this),super.texture=t,t.on("update",this.textureUpdated,this),this.textureUpdated()}get texture(){return this._texture}destroy(t){this.texture.off("update",this.textureUpdated,this),super.destroy(t)}}const C=class k extends R{constructor(t){const{width:e,points:i,textureScale:r}={...k.defaultOptions,...t};super({positions:new Float32Array(i.length*4),uvs:new Float32Array(i.length*4),indices:new Uint32Array((i.length-1)*6)}),this.points=i,this._width=e,this.textureScale=r,this._build()}get width(){return this._width}_build(){const t=this.points;if(!t)return;const e=this.getBuffer("aPosition"),i=this.getBuffer("aUV"),r=this.getIndex();if(t.length<1)return;e.data.length/4!==t.length&&(e.data=new Float32Array(t.length*4),i.data=new Float32Array(t.length*4),r.data=new Uint16Array((t.length-1)*6));const s=i.data,a=r.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let d=0,l=t[0];const p=this._width*this.textureScale,n=t.length;for(let o=0;o<n;o++){const u=o*4;if(this.textureScale>0){const c=l.x-t[o].x,g=l.y-t[o].y,w=Math.sqrt(c*c+g*g);l=t[o],d+=w/p}else d=o/(n-1);s[u]=d,s[u+1]=0,s[u+2]=d,s[u+3]=1}let h=0;for(let o=0;o<n-1;o++){const u=o*2;a[h++]=u,a[h++]=u+1,a[h++]=u+2,a[h++]=u+2,a[h++]=u+1,a[h++]=u+3}i.update(),r.update(),this.updateVertices()}updateVertices(){const t=this.points;if(t.length<1)return;let e=t[0],i,r=0,s=0;const a=this.buffers[0].data,d=t.length,l=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let p=0;p<d;p++){const n=t[p],h=p*4;p<t.length-1?i=t[p+1]:i=n,s=-(i.x-e.x),r=i.y-e.y;const o=Math.sqrt(r*r+s*s);o<1e-6?(r=0,s=0):(r/=o,s/=o,r*=l,s*=l),a[h]=n.x+r,a[h+1]=n.y+s,a[h+2]=n.x-r,a[h+3]=n.y-s,e=n}this.buffers[0].update()}update(){this.textureScale>0?this._build():this.updateVertices()}};C.defaultOptions={width:200,points:[],textureScale:0};let et=C;const A=class D extends F{constructor(t){const{texture:e,points:i,textureScale:r,...s}={...D.defaultOptions,...t},a=new et(x({width:e.height,points:i,textureScale:r}));r>0&&(e.source.style.addressMode="repeat"),super(x({...s,texture:e,geometry:a})),this.autoUpdate=!0,this.onRender=this._render}_render(){const t=this.geometry;(this.autoUpdate||t._width!==this.texture.height)&&(t._width=this.texture.height,t.update())}};A.defaultOptions={textureScale:0};let it=A;class st extends F{constructor(t){const{texture:e,vertices:i,uvs:r,indices:s,topology:a,...d}=t,l=new R(x({positions:i,uvs:r,indices:s,topology:a}));super(x({...d,texture:e,geometry:l})),this.autoUpdate=!0,this.onRender=this._render}get vertices(){return this.geometry.getBuffer("aPosition").data}set vertices(t){this.geometry.getBuffer("aPosition").data=t}_render(){this.autoUpdate&&this.geometry.getBuffer("aPosition").update()}}const S=""+new URL("1-4e41503c.png",import.meta.url).href,rt=""+new URL("2-2c2135ef.png",import.meta.url).href,nt=""+new URL("3-01195b1c.png",import.meta.url).href,ot=""+new URL("4-96c0da45.png",import.meta.url).href,ht=""+new URL("5-692902c6.png",import.meta.url).href,at=""+new URL("6-a278697a.png",import.meta.url).href,ut=""+new URL("7-3ecd4cd4.png",import.meta.url).href,ct=""+new URL("8-665c082f.png",import.meta.url).href,dt=""+new URL("9-feca5c89.png",import.meta.url).href,lt=""+new URL("10-ddfe3433.png",import.meta.url).href,pt=""+new URL("11-7238fbd1.png",import.meta.url).href,mt=""+new URL("12-40e888c0.png",import.meta.url).href,ft=""+new URL("13-9a8f1a4b.png",import.meta.url).href,xt=""+new URL("14-f28c1de3.png",import.meta.url).href,gt=""+new URL("15-944d485f.png",import.meta.url).href,_t=""+new URL("16-71db446a.png",import.meta.url).href,yt=""+new URL("17-47a839f0.png",import.meta.url).href,wt=""+new URL("18-4a4108e5.png",import.meta.url).href,Tt=""+new URL("19-76a7e622.png",import.meta.url).href,Ut=""+new URL("20-e670d00e.png",import.meta.url).href,Pt=""+new URL("background-e34fcf73.png",import.meta.url).href,Ht={__name:"DisplayObject2",setup(y){const t=q(null),e=async(n,h)=>{const o=new O;return await o.init({width:n,height:h,antialias:!0,resolution:window.devicePixelRatio||1,autoDensity:!0}),o},i=async()=>{const n=[S,rt,nt,ot,ht,at,ut,ct,dt,lt,pt,mt,ft,xt,gt,_t,yt,wt,Tt,Ut],h=await U.load(n),o=new b(Object.values(h));return o.width=90,o.height=90,o},r=async()=>{const n=await U.load(Pt);return new Q({texture:n,width:n.width*.5,height:n.height*.5,tileScale:{x:.5,y:.5}})},s=()=>new Z({text:`Hello Pixi!
 BitmapText`,style:{fontFamily:"Arial",fontSize:18,fill:16715792,align:"center"}}),a=()=>new st({vertices:[0,30,30,-30,-30,-30],indices:[0,1,2,2,0,1]}),d=async()=>{const n=await U.load(S),h=new tt({texture:n,verticesX:20});return h.width=n.width*.3,h.height=n.height*.3,h},l=async()=>{const n=await U.load("https://pixijs.com/assets/snake.png"),h=918/20,o=[];for(let c=0;c<20;c++)o.push(new G(c*h,Math.sin(c*.5)*30));const u=new it({texture:n,points:o});return u.scale.set(.5),u},p=async n=>{const{element:h,boundingRect:o}=n,u=await e(o.width,o.height);h.appendChild(u.canvas);const c={x:u.screen.width*.5,y:u.screen.height*.5};r().then(m=>{u.ticker.add(()=>{m.tilePosition.x-=.5}),u.stage.addChild(m)}),i().then(m=>{m.position.set(c.x,c.y*.5),u.stage.addChild(m),m.play()});const g=s();g.position.set(c.x,c.y),u.stage.addChild(g);const w=a();w.position.set(c.x*.5,c.y+30),u.stage.addChild(w),d().then(m=>{m.position.set(c.x*.5,c.y),u.stage.addChild(m)}),l().then(m=>{m.position.set(c.x*.1,c.y*1.5),u.stage.addChild(m)})};return W(()=>{const n=t.value,h=n.getBoundingClientRect();p({element:n,boundingRect:h})}),(n,h)=>(J(),K("div",{ref_key:"boxElementRef",ref:t,class:"box"},null,512))}};export{Ht as default};
