import{T as h}from"./TexturePool-cca4082f.js";import{R as b}from"./Shader-62100aa5.js";import{d as n,v as o}from"./index-19f7f59e.js";import{F as d}from"./Filter-c83bd7ed.js";import{B as u}from"./BlurFilterPass-05b71516.js";class p extends d{constructor(...t){let e=t[0]??{};typeof e=="number"&&(n(o,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),e={strength:e},t[1]&&(e.quality=t[1]),t[2]&&(e.resolution=t[2]),t[3]&&(e.kernelSize=t[3])),e={...u.defaultOptions,...e};const{strength:r,quality:l,...i}=e;super({...i,compatibleRenderers:b.BOTH,resources:{}}),this._repeatEdgePixels=!1,this.blurXFilter=new u({horizontal:!1,...e}),this.blurYFilter=new u({horizontal:!0,...e}),this.quality=l,this.blur=r,this.repeatEdgePixels=!1}apply(t,e,r,l){const i=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(i&&a){const s=h.getSameSizeTexture(e);this.blurXFilter.apply(t,e,s,!0),this.blurYFilter.apply(t,s,r,l),h.returnTexture(s)}else a?this.blurYFilter.apply(t,e,r,l):this.blurXFilter.apply(t,e,r,l)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}p.defaultOptions={strength:8,quality:4,kernelSize:5};export{p as B};
